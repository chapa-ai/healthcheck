# Разработать healthcheck сервис

Необходимо разработать сервис для проверки работоспособности сайтов.

Сервис должен читать конфигурацию из файла.

В конфигурационном файле содержится список url адресов для проверки.

Для каждого адреса можно задать типы проверок, а так же количество проверок, которые должны быть успешными, чтобы считать сайт работоспособным.

Предполагается, что разработка сервиса будет состоять из нескольких этапов.

**Пример конфигурации:**

```
{
    urls: [
        {
            ‘url’: ‘http://ya.ru’
            ‘checks’: [‘status_code’, ‘text’]
            ‘min_checks_cnt’: 2
        },
        {
            ‘url’: ‘http://vk.com’
            ‘checks’: [‘status_code’]
            ‘min_checks_cnt’: 1
        },
        {
            ‘url’: ‘http://mail.ru’
            ‘checks’: [‘status_code’, ‘text’]
            ‘min_checks_cnt’: 1
        }
    ]
}
```

Как видно из конфига, ya.ru можно считать работоспособным только если прошли обе проверки, а для mail.ru достаточно хотя бы одной(status_code или text).

**Необходимо проработать архитектуру сервиса, учитывая что**:

- будут регулярно добавляться новые типы проверок (проверка на конкретный ip адрес, content length, максимальное время ответа и т.д)
- в будущем может появиться необходимость параметризировать проверки в конфиге, например, указывать конкретный статус код(для ya.ru хотим проверять статус код == 200, а для vk.com статус код == 301)
- предполагается долгосрочное развитие сервиса, функциональность будет постоянно наращиваться

В рамках тестового задания можно считать, что тип проверки `status_code` всегда проверяет 200 статус код, а `text` всегда проверяет наличие подстроки `ok` в теле ответа, параметризацию в конфиг можно не добавлять.

# 1 Этап

На этом этапе нужно разработать утилиту, которая:
- читает конфигурационный файл
- запускает нужные проверки
- выводит в stdout результаты проверки: url адрес сайта, состояние(ok/fail), список проверок которые не были пройдены

**пример:**

```
http://ya.ru: fail (status_code, text)
http://vk.com: ok
http://mail.ru: ok
```

# 2 Этап

- сохранять статусы проверки в бд
- добавить отправку уведомлений, при изменении статуса сайта: был `ok`, стал `fail`, или был `fail` стал `ok`

Для эмуляции отправки уведомлений можно делать post запрос на `http://httpbin.org/post`

# 3 Этап
- сделать, чтобы проверка работоспособности запускалась автоматически, с определенным интервалом

# 4 этап
- добавить api для получения результатов проверок
- апи должно возвращать url, status, список типов проверок, которые не были пройдены (например, ожидали 200 статус, а вернулся 500)

# Общие замечания:

При выполнении тестового задания обязательным считается только 1 этап. Большим плюсом будет выполнение остальных этапов и **написание тестов**.

При возникновении вопросов по ТЗ оставляем принятие решения за кандидатом (в таком случае Readme файле к проекту должен быть указан список вопросов с которыми кандидат столкнулся и каким образом он их решил).

Во время проверки задания будем обращать внимание на именование переменных, файлов, структуру проекта, общую архитектуру.

В качестве языка программирования использовать `go`.

Исходный код предоставить в виде ссылки на репозиторий.